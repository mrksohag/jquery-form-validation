if("undefined"==typeof jQuery){throw new Error("SM Validation JavaScript needs jQuery JS file.")}
$(document).ajaxError(function(){$(".log").text("Triggered ajaxError handler.");return!1})
var smValidator;(function($){smValidator=function(id,obj,type,ajaxInfo){function check_fields(id,obj){var error=0;$('#'+id).find('[type="submit"]').attr('disabled',!0);if(jQuery.type(obj)=='object'){for(item in obj){var obj1=obj[item];var errorStr="";var selector=$('#'+id).find('[name="'+item+'"]');var loop=0;if(jQuery.type(obj1)=='object'){for(item2 in obj1){var obj2=obj1[item2];if(jQuery.type(obj2)=='object'){if(selector.length>0||item2=='count'){if(item2!='count'){var val=selector.val();var length=val.length}
    if(loop>0&&errorStr!=''){errorStr+=".\n<br>"}
    loop++;if(item2=='stringLength'){if(val<obj2.min||val>obj2.max){error++;errorStr+=obj2.message}}else if(item2=='match'){if($('#'+id).find('[name="'+obj2.field+'"]').val()!=val){error++;errorStr+=obj2.message}}else if(item2=='email'){if(obj1.notEmpty!==undefined){if(!ValidateEmail(val)){error++;errorStr+=obj2.message}}else{if(length>0){if(!ValidateEmail(val)){error++;errorStr+=obj2.message}}}}else if(item2=='mobile'){if(obj1.notEmpty!==undefined){if(!phonenumber(val)){error++;errorStr+=obj2.message}}else{if(length>0){if(!phonenumber(val)){error++;errorStr+=obj2.message}}}}else if(item2=='count'){var count=0;if(obj2.type=='checkbox'){$('.'+obj2.countClass).each(function(){if($(this).is(":checked")){count++}})}else if(obj2.type=='class'){$(obj2.selector).each(function(){count++})}
        if(count<obj2.min){error++;if($('#'+obj2.massageDivId+'_warning').length>0){$('#'+obj2.massageDivId+'_warning').html('<i class="help-block">'+obj2.message+"</i>")}else{$('#'+obj2.massageDivId).after('<div id="'+obj2.massageDivId+'_warning" class="has-error"><i class="help-block">'+obj2.message+"</i></div>")}}else{$('#'+obj2.massageDivId+'_warning').remove()}}else if(item2=='remote'){var data=item+"="+val;$.ajax({url:obj2.url,type:obj2.type,async:!1,data:data,success:function(response){if(parseInt(response)==1){error++;errorStr+=obj2.message}},error:function(error){error++;errorStr+=obj2.message}})}else if(item2=='notEmpty'){if(length<1){error++;errorStr+=obj2.message}}else if(item2=='itsDependable'){if(length>0&&obj2.rules[val]){var rules=obj2.rules[val];error+=check_fields(id,rules)}}else if(item2=='visaCard'){if(!visaCard(val)){error++;errorStr+=obj2.message}}else if(item2=='masterCard'){if(!masterCard(val)){error++;errorStr+=obj2.message}}else if(item2=='cardDateMonth'){if(!datemonthValiate(val)){error++;errorStr+=obj2.message}}else if(item2=='onchange'&&obj2==!0){}else if(item2=='onkeyup'&&obj2==!0){}}}}}
    if(errorStr!=''){showError(selector,errorStr)}else{removeError(selector)}}}
    return error}
    if(type==2){var error=check_fields(id,obj);$('#'+id).find('[type="submit"]').attr('disabled',!1);if(error>0){return!1}else{return!0}}else if(type==3){var error=check_fields(id,obj);$('#'+id).find('[type="submit"]').attr('disabled',!1);if(error>0){return!1}else{console.log("ajax");var data=$('#'+id).serialize();var type=ajaxInfo&&ajaxInfo.type?ajaxInfo.type:$('#'+id).attr('method');var url=ajaxInfo&&ajaxInfo.url?ajaxInfo.url:$('#'+id).attr('action');if(ajaxInfo&&ajaxInfo[csrfFieldId]){var _token=$('#'+ajaxInfo.csrfFieldId).val();var inputName=ajaxInfo.csrfFieldName?ajaxInfo.csrfFieldName:'_token';var fildsWithVal={};fildsWithVal[inputName]=_token;data+='&'+$.param(fildsWithVal)}
        var returnResponse={isSuccess:!1,response:'We cannot process ajax. Please check your server request.'};$.ajax({type:type,url:url,async:!1,data:data,success:function(response){returnResponse={isSuccess:!0,response:response}},error:function(error){var errors=error.responseJSON.errors;var errorCannotShow='';for(var err in errors){var text=errors[err][0];var selector=$('#'+id).find('[name="'+err+'"]');if(selector.length>0){showError(selector,text)}else{errorCannotShow+=text+" \n"}}
            if(errorCannotShow!=''){alert(errorCannotShow)}
            returnResponse={isSuccess:!1,response:error}}});return returnResponse}}else{$('#'+id).on('submit',function(e){var error=check_fields(id,obj);if(error>0){$('#'+id).find('[type="submit"]').attr('disabled',!1);e.preventDefault()}})}}})(jQuery);function ValidateEmail(mail){var filter=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(!filter.test(mail)){return(!1)}
    return(!0)}
function datemonthValiate(dateExpire){var validate=/^[0-9]{2}\/[0-9]{4}$/;if(validate.test(dateExpire)){return!0}
    return!1}
function visaCard(feild_value){var text=feild_value.replace(/-/g,"");text=text.replace(/ /g,"");var card=/^[4]{1}[0-9]{15}$/;if(card.test(text)){return!0}
    return!1}
function masterCard(feild_value){var text=feild_value.replace(/-/g,"");text=text.replace(/ /g,"");var card=/^[5]{1}[0-9]{15}$/;var card2=/^[2]{1}[0-9]{15}$/;if(card.test(text)||card2.test(text)){return!0}
    return!1}
String.prototype.replaceAll=function(search,replacement){var target=this;return target.replace(new RegExp(search,'g'),replacement)};function phonenumber(inputtxt){var text=inputtxt.replaceAll("-","");text=text.replaceAll(" ","");var mob=/^[0-9]{11}$/;if(mob.test(text)){return!0}else{return!1}}
function showError(selector,errorStr){selector.parent('div').addClass("has-error");if(selector.siblings('.help-block').length>0){selector.siblings('.help-block').html(errorStr)}else{selector.after('<i class="help-block">'+errorStr+"</i>")}}
function removeError(selector){selector.parent('div').removeClass("has-error");if(selector.siblings('.help-block').length>0){selector.siblings('.help-block').remove()}}